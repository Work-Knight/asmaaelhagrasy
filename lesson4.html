
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unit 1 ‚Äì Lesson 4: Where Pride Begins ‚Äî Mini Platform (EN Tabs)</title>
<style>
  :root{--bg:#f9fafb;--text:#0f172a;--muted:#6b7280;--accent:#6c63ff;--accent2:#00bfa6;--good:#22c55e;--bad:#ef4444;--gold:#f59e0b}
  *{box-sizing:border-box}
  body{margin:0;font-family:'Cairo',system-ui,-apple-system,Segoe UI,Roboto;background:var(--bg);color:var(--text)}
  header{position:sticky;top:0;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;padding:14px 16px;z-index:10}
  header h1{font-size:18px;margin:0}
  nav{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  nav button{flex:1;border:0;border-radius:10px;padding:10px;background:#fff;color:#111;font-weight:700}
  nav button.active{background:#fde047}
  main{padding:14px}
  .view{display:none}
  .view.active{display:block}
  .section-card{background:#fff;border-radius:16px;padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.08);margin-bottom:14px}
  .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:12px}
  .card{border-radius:16px;padding:14px;color:#111;box-shadow:0 6px 16px rgba(0,0,0,.08)}
  .chip{display:inline-block;background:rgba(0,0,0,.06);padding:4px 8px;border-radius:999px;font-size:12px;margin-inline-start:6px}
  .stack{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .btn{background:var(--accent);color:#fff;border:0;border-radius:10px;padding:10px 12px;font-weight:700}
  .btn.alt{background:var(--accent2)}
  .btn.ghost{background:#fff;color:var(--accent);border:2px solid var(--accent)}
  .input{width:100%;padding:10px;border-radius:10px;border:2px solid #e5e7eb}
  .muted{color:var(--muted)}
  .tile{padding:12px;border-radius:12px;background:#eef2ff;border:2px solid #e0e7ff;text-align:center;font-weight:700}
  .tile.correct{background:#e6f9ee;border-color:#bbf7d0}
  .tile.wrong{background:#fee2e2;border-color:#fecaca}
  .option{padding:10px;border:2px solid #e5e7eb;border-radius:12px;margin-top:8px}
  .option.correct{border-color:#16a34a;background:#e8fbef}
  .option.wrong{border-color:#ef4444;background:#fee2e2}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media(min-width:680px){.grid{grid-template-columns:repeat(4,1fr)}}
  .score{font-weight:800}
  .kahoot{background:#111827;color:#fff;border-radius:16px;padding:14px}
  .k-timer{font-weight:800;color:#fde047}
  .k-q{font-size:18px;margin-bottom:10px}
  .k-opt{padding:10px;border-radius:12px;margin:8px 0;background:#1f2937;border:2px solid #374151}
  .k-opt.correct{border-color:#22c55e;background:#064e3b}
  .k-opt.wrong{border-color:#ef4444;background:#7f1d1d}
  .k-score{margin-top:10px}
  .tc{background:#0f172a;color:#fff;border-radius:16px;padding:14px}
  .tc h3{margin-top:0}
  .tc .big{font-size:22px;font-weight:800;color:#fde047}
  .tc .pill{display:inline-flex;gap:6px;align-items:center;background:#111827;border:1px solid #334155;border-radius:999px;padding:6px 10px}
  canvas#confetti{position:fixed, inset:0; pointer-events:none; z-index:100}
</style>
</head>
<body>
<canvas id="confetti"></canvas>
<header>
  <h1>Unit 1 ‚Äì Lesson 4: Where Pride Begins ‚Ä¢ Mini Platform</h1>
  <nav id="nav"></nav>
</header>
<main>
  <!-- VOCAB -->
  <section id="vocab" class="view active">
    <div class="section-card">
      <h2>üé¥ Vocabulary Cards + Dictation</h2>
      <p class="muted">Each card has a unique color. Tap ‚ñ∂Ô∏è for British pronunciation; try dictation from Arabic meaning.</p>
      <div id="vocabCards" class="cards"></div>
    </div>
    <div class="section-card" id="dictation">
      <h3>‚úçÔ∏è Word Dictation from Arabic Meaning</h3>
      <div id="dictWrap"></div>
    </div>
    <div class="section-card">
      <h2>‚è±Ô∏è Timed Challenge ‚Äì Speed Vocab</h2>
      <div class="tc" id="timedBox">
        <h3>How many words can you get in <span class="big">60s</span>?</h3>
        <div class="stack">
          <span class="pill">‚è≥ Time: <b id="tcTime">60</b>s</span>
          <span class="pill">‚≠ê Score: <b id="tcScore">0</b></span>
          <span class="pill">üî• Streak: <b id="tcStreak">0</b></span>
        </div>
        <p style="margin-top:10px">Arabic meaning: <b id="tcMeaning">‚Äî</b></p>
        <input id="tcInput" class="input" placeholder="Type the English word here" autocomplete="off"/>
        <div class="stack" style="margin-top:10px">
          <button class="btn alt" id="tcStart">Start 60s Round</button>
          <button class="btn ghost" id="tcHint">üí° Hear the word</button>
        </div>
        <p class="muted" id="tcFeedback"></p>
      </div>
    </div>
  </section>

  <!-- READING -->
  <section id="reading" class="view">
    <div class="section-card">
      <h2>üìñ Simplified Reading ‚Äì Slow British Voice (Sentence by Sentence)</h2>
      <div id="sentences"></div>
      <div class="stack" style="margin-top:10px">
        <button id="playAll" class="btn">‚ñ∂Ô∏è Play All Slowly</button>
        <button id="stopAll" class="btn ghost">‚èπÔ∏è Stop</button>
      </div>
    </div>
  </section>

  <!-- GAMES -->
  <section id="games" class="view">
    <div class="section-card">
      <h2>üß© Interactive Games</h2>
      <div id="matchGame" class="section-card"></div>
      <div id="kahootGame" class="section-card"></div>
    </div>
  </section>

  <!-- EXAM -->
  <section id="exam" class="view">
    <div class="section-card">
      <h2>üìù Interactive Lesson Exam</h2>
      <div class="stack">
        <input id="studentName" class="input" placeholder="ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖŸÉ ÿßŸÑÿ´ŸÑÿßÿ´Ÿä"/>
        <button id="startExam" class="btn alt">Start Exam</button>
      </div>
      <div id="examBox" class="section-card"></div>
      <div id="examResult" class="score"></div>
      <div id="examReview" class="section-card"></div>
    </div>
  </section>

  <!-- SETTINGS -->
  <section id="settings" class="view">
    <div class="section-card">
      <h2>‚öôÔ∏è Settings</h2>
      <div class="stack">
        <button class="btn ghost" id="testVoice">Test British Voice</button>
      </div>
      <p class="muted">We use <b>SpeechSynthesis</b> with British English (en‚ÄëGB). Some phones need a first tap to allow audio.</p>
    </div>
  </section>
</main>

<script>
/*************** Data (Lesson 4) ***************/
const COLORS = ['#ffadad','#ffd6a5','#fdffb6','#caffbf','#9bf6ff','#a0c4ff','#bdb2ff','#ffc6ff','#f1f0ff','#e6fffa'];
const VOCAB = [
  {w:'pride', ar:'ŸÅÿÆÿ±', ex:'True pride grows from strong roots of culture and values.'},
  {w:'heritage', ar:'ÿ™ÿ±ÿßÿ´', ex:'Our heritage connects us to the past.'},
  {w:'civilization', ar:'ÿ≠ÿ∂ÿßÿ±ÿ©', ex:'Egypt is one of the oldest civilizations.'},
  {w:'monument', ar:'ÿ£ÿ´ÿ± ÿ™ÿßÿ±ŸäÿÆŸä / ŸÖÿπŸÑŸÖ', ex:'The pyramids are mighty monuments.'},
  {w:'mighty', ar:'ŸÇŸàŸä / ÿπÿ∏ŸäŸÖ', ex:'The mighty pyramids still amaze the world.'},
  {w:'magnificent', ar:'ÿ±ÿßÿ¶ÿπ / ŸÖŸáŸäÿ®', ex:'Temples along the Nile are magnificent.'},
  {w:'achievement', ar:'ÿ•ŸÜÿ¨ÿßÿ≤', ex:'Writing and medicine were great achievements.'},
  {w:'culture', ar:'ÿ´ŸÇÿßŸÅÿ©', ex:'Egypt became a home for culture and learning.'},
  {w:'author', ar:'ŸÖÿ§ŸÑŸÅ', ex:'Great authors shared wisdom with people.'},
  {w:'poet', ar:'ÿ¥ÿßÿπÿ±', ex:'Poets expressed powerful ideas in writing.'},
  {w:'value (n.)', ar:'ŸÇŸäŸÖÿ©', ex:'Respect and honesty are important values.'},
  {w:'tradition', ar:'ÿ™ŸÇŸÑŸäÿØ', ex:'Traditions are passed down through generations.'},
  {w:'belief', ar:'ÿßÿπÿ™ŸÇÿßÿØ', ex:'Beliefs guide people‚Äôs choices and actions.'},
  {w:'preserve', ar:'Ÿäÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ', ex:'Museums help preserve our heritage.'},
  {w:'celebrate', ar:'Ÿäÿ≠ÿ™ŸÅŸÑ / Ÿäÿ≠ÿ™ŸÅŸä', ex:'We celebrate our culture and achievements.'},
  {w:'inspire', ar:'ŸäŸèŸÑŸáŸÖ', ex:'Egypt‚Äôs story inspires people everywhere.'}
];

// Simplified reading sentences for Lesson 4 (sentence-by-sentence)
const SENTENCES = [
  'Pride grows slowly like a tree with deep roots of history, culture, and shared values.',
  'Ancient Egyptians built mighty pyramids and magnificent temples along the Nile.',
  'They developed writing systems, mathematics, and medical knowledge‚Äîlasting achievements.',
  'Egypt became a home for creativity where authors and poets preserved and celebrated culture.',
  'Our heritage reflects values, traditions, and beliefs that influence future generations.',
  'True pride begins when we understand our past and work with determination for the future.',
  'It is not only what we inherit, but also what we create for the generations to come.'
];

// Exam questions
const EXAM = [
  {q:'The pyramids and temples are examples of ancient _____.', opts:['monuments','neighborhoods','storms','games'], a:0},
  {q:'‚ÄúHeritage‚Äù refers to _____.', opts:['future plans only','history, culture, and traditions','modern technology','traffic rules'], a:1},
  {q:'Authors and poets helped to _____.', opts:['destroy culture','preserve and celebrate culture','hide ideas','stop learning'], a:1},
  {q:'The word ‚Äúmighty‚Äù is closest in meaning to _____.', opts:['small','weak','strong and impressive','boring'], a:2},
  {q:'Museums help to _____ our heritage.', opts:['ignore','preserve','sell','forget'], a:1},
  {q:'True pride begins when we _____.', opts:['forget the past','understand our history','stop studying','travel only'], a:1},
  {q:'Ancient achievements included _____.', opts:['sports and parties','writing, mathematics, and medicine','silent movies','fast cars'], a:1},
  {q:'‚ÄúInspire‚Äù means to _____.', opts:['make people tired','motivate and encourage others','clean buildings','close doors'], a:1},
  {q:'Culture in Egypt was _____ and celebrated.', opts:['hidden','preserved','lost','unknown'], a:1},
  {q:'Values and traditions can _____ future generations.', opts:['influence','confuse','ignore','stop'], a:0}
];

/*************** Tabs ***************/
const tabs=[{id:'vocab',label:'Vocabulary'},{id:'reading',label:'Reading'},{id:'games',label:'Games'},{id:'exam',label:'Exam'},{id:'settings',label:'Settings'}];
const nav=document.getElementById('nav'); const views={};
for(const t of tabs){const b=document.createElement('button'); b.textContent=t.label; b.onclick=()=>show(t.id); nav.appendChild(b); views[t.id]=document.getElementById(t.id);} nav.firstChild.classList.add('active');
function show(id){document.querySelectorAll('nav button').forEach(x=>x.classList.remove('active')); [...nav.children].find(b=>b.textContent===tabs.find(t=>t.id===id).label).classList.add('active'); Object.values(views).forEach(v=>v.classList.remove('active')); views[id].classList.add('active');}

/*************** Voice ***************/
let preferredVoice=null; function loadVoices(){const vs=speechSynthesis.getVoices(); preferredVoice=vs.find(v=>v.lang && v.lang.startsWith('en-GB')) || vs.find(v=>v.lang && v.lang.startsWith('en')) || null;} window.speechSynthesis.onvoiceschanged=loadVoices; loadVoices();
function speak(text, rate=0.82){const u=new SpeechSynthesisUtterance(text); if(preferredVoice) u.voice=preferredVoice; u.lang='en-GB'; u.rate=rate; u.pitch=1; speechSynthesis.cancel(); speechSynthesis.speak(u);} 
function beep(good=true){const ctx=new(window.AudioContext||window.webkitAudioContext)(); const o=ctx.createOscillator(), g=ctx.createGain(); o.type=good?'triangle':'sawtooth'; o.frequency.value=good?880:220; g.gain.value=0.05; o.connect(g); g.connect(ctx.destination); o.start(); setTimeout(()=>{o.stop();ctx.close();},180);} 

/*************** Vocabulary Cards ***************/
const vc=document.getElementById('vocabCards');
VOCAB.forEach((it,i)=>{const c=document.createElement('div'); c.className='card'; c.style.background=COLORS[i%COLORS.length]; c.innerHTML=`<h3>${it.w} <span class='chip'>${it.ar}</span></h3><p>üìå <em>${it.ex}</em></p><div class='stack'><button class='btn' data-w='${it.w}'>‚ñ∂Ô∏è Pronounce</button><button class='btn ghost' data-ex='${it.ex}'>üéß Speak Example</button></div>`; vc.appendChild(c);} );
vc.addEventListener('click',(e)=>{const w=e.target.getAttribute('data-w'); const ex=e.target.getAttribute('data-ex'); if(w) speak(w,0.92); if(ex) speak(ex,0.9);});

/*************** Dictation ***************/
const dictWrap=document.getElementById('dictWrap'); let dIdx=0, dScore=0, order=[...VOCAB.keys()]; shuffle(order);
function renderDict(){const item=VOCAB[order[dIdx]]; dictWrap.innerHTML=`<div class='stack'><span class='chip'>Meaning: <b>${item.ar}</b></span><button class='btn' id='playWord'>‚ñ∂Ô∏è Hear Word</button></div><input id='ans' class='input' placeholder='Type the word in English' autocomplete='off'/><div class='stack' style='margin-top:8px'><button class='btn alt' id='check'>Check</button><span class='chip'>Score: ${dScore} / ${dIdx}</span></div>`; document.getElementById('playWord').onclick=()=>speak(item.w,0.9); document.getElementById('check').onclick=()=>{const a=document.getElementById('ans').value.trim().toLowerCase(); const ok=a===item.w.toLowerCase(); if(ok){dScore++; confetti(70); beep(true);} else {beep(false);} dIdx++; if(dIdx<order.length) renderDict(); else dictWrap.innerHTML=`<h4>Great! Your dictation score: ${dScore} / ${order.length}</h4>`;};}
renderDict();

/*************** Timed Challenge (Speed Vocab) ***************/
let tcRunning=false, tcTimer=null, tcTime=60, tcScore=0, tcStreak=0, tcCurrent=null;
const mEl=document.getElementById('tcMeaning'); const tEl=document.getElementById('tcTime'); const sEl=document.getElementById('tcScore'); const stEl=document.getElementById('tcStreak'); const inp=document.getElementById('tcInput'); const fb=document.getElementById('tcFeedback');
function nextWord(){tcCurrent = VOCAB[Math.floor(Math.random()*VOCAB.length)]; mEl.textContent = tcCurrent.ar; inp.value=''; inp.focus();}
function startRound(){if(tcRunning) return; tcRunning=true; tcTime=60; tcScore=0; tcStreak=0; updateHUD(); nextWord(); fb.textContent=''; clearInterval(tcTimer); tcTimer=setInterval(()=>{tcTime--; tEl.textContent=tcTime; if(tcTime<=0){endRound();}},1000);} 
function endRound(){clearInterval(tcTimer); tcRunning=false; fb.innerHTML = `‚è∞ Time up! Final score: <b>${tcScore}</b>.`;}
function updateHUD(){tEl.textContent=tcTime; sEl.textContent=tcScore; stEl.textContent=tcStreak;}

document.getElementById('tcStart').onclick=()=>{startRound();};
document.getElementById('tcHint').onclick=()=>{if(tcCurrent) speak(tcCurrent.w,0.95);} 

inp.addEventListener('keydown', (e)=>{if(e.key==='Enter' && tcRunning){ const a=inp.value.trim().toLowerCase(); const ok=a===tcCurrent.w.toLowerCase(); if(ok){tcScore += 1 + Math.min(tcStreak,5); tcStreak++; confetti(60); beep(true); fb.textContent='‚úî Correct! +'+(1+Math.min(tcStreak-1,5)); } else {tcStreak=0; beep(false); fb.textContent='‚úñ Wrong. Try the next one.';} updateHUD(); nextWord(); }});

/*************** Reading ***************/
const sWrap=document.getElementById('sentences');
SENTENCES.forEach((line,idx)=>{const row=document.createElement('div'); row.className='section-card'; row.innerHTML=`<div class='stack'><span><b>${idx+1}.</b> ${line}</span><button class='btn' data-play='${idx}'>‚ñ∂Ô∏è Play</button><button class='btn ghost' data-replay='${idx}'>üîÅ Replay</button></div>`; sWrap.appendChild(row);} );
sWrap.addEventListener('click',(e)=>{const i=e.target.getAttribute('data-play')||e.target.getAttribute('data-replay'); if(i!==null){ speak(SENTENCES[+i],0.8);} });

document.getElementById('playAll').onclick=()=>{speechSynthesis.cancel(); SENTENCES.forEach((line,i)=> setTimeout(()=>speak(line,0.8), i*2700));};
document.getElementById('stopAll').onclick=()=>speechSynthesis.cancel();

/*************** Matching Cards ***************/
const match=document.getElementById('matchGame'); match.innerHTML='<h3>üÉè Match Word ‚Üî Meaning</h3><div id="matchGrid" class="grid"></div>'; const PAIRS=VOCAB.slice(0,8).map(x=>({w:x.w,ar:x.ar})); let first=null, found=0; buildMatch();
function buildMatch(){const g=document.getElementById('matchGrid'); const arr=[]; PAIRS.forEach((p,i)=>{arr.push({t:p.w,k:i}); arr.push({t:p.ar,k:i});}); shuffle(arr); g.innerHTML=''; arr.forEach(t=>{const d=document.createElement('div'); d.className='tile'; d.textContent=t.t; d.dataset.key=t.k; d.onclick=()=>sel(d); g.appendChild(d);});}
function sel(d){ if(d.classList.contains('correct')) return; d.classList.toggle('selected'); if(!first){first=d; return;} if(first.dataset.key===d.dataset.key && first!==d){[first,d].forEach(x=>{x.classList.add('correct'); x.classList.remove('selected');}); found++; confetti(60); beep(true); if(found===PAIRS.length){setTimeout(()=>{alert('Great! Round completed.'); found=0; buildMatch();},300);} } else { [first,d].forEach(x=>x.classList.add('wrong')); beep(false); setTimeout(()=>{[first,d].forEach(x=>x.classList.remove('wrong','selected'));},500);} first=null; }

/*************** Mini Kahoot (Arabic meaning ‚Üí English choices) ***************/
const kahoot=document.getElementById('kahootGame'); kahoot.innerHTML='<h3>‚ö° Mini Kahoot</h3><div class="kahoot"><div class="k-q" id="kQ"></div><div id="kOpts"></div><div class="k-score"><span>Score: </span><b id="kScore">0</b> ‚Ä¢ <span class="k-timer" id="kTimer">10s</span></div><div class="stack" style="margin-top:8px"><button class="btn" id="kStart">Start Round</button><button class="btn ghost" id="kNext">Next Round</button></div></div>';
let kScore=0, kTime=10, kInterval=null; function startKahoot(){clearInterval(kInterval); kTime=10; document.getElementById('kTimer').textContent=kTime+'s'; const item=VOCAB[Math.floor(Math.random()*VOCAB.length)]; document.getElementById('kQ').innerHTML=`Arabic meaning: <b>${item.ar}</b> ‚Äî choose the correct English word:`; const optsCont=document.getElementById('kOpts'); optsCont.innerHTML=''; const distractors=shuffle(VOCAB.filter(v=>v!==item).map(v=>v.w)).slice(0,3); const options=shuffle([item.w, ...distractors]); options.forEach(op=>{const d=document.createElement('div'); d.className='k-opt'; d.textContent=op; d.onclick=()=>{optsCont.querySelectorAll('.k-opt').forEach(o=>o.onclick=null); const ok=op===item.w; if(ok){d.classList.add('correct'); kScore+=kTime; confetti(90); beep(true);} else {d.classList.add('wrong'); beep(false);} document.getElementById('kScore').textContent=kScore; clearInterval(kInterval);}; optsCont.appendChild(d);}); kInterval=setInterval(()=>{kTime--; document.getElementById('kTimer').textContent=kTime+'s'; if(kTime<=0){clearInterval(kInterval); optsCont.querySelectorAll('.k-opt').forEach(o=>o.onclick=null); alert('Time is up! Try another round.'); }},1000);} 
document.getElementById('kStart').onclick=startKahoot; document.getElementById('kNext').onclick=startKahoot;

/*************** Exam ***************/
const examBox=document.getElementById('examBox'); const examBtn=document.getElementById('startExam'); const examRes=document.getElementById('examResult'); const examReview=document.getElementById('examReview'); let currentQ=0, score=0, exOrder=[...EXAM.keys()]; shuffle(exOrder);
examBtn.onclick=()=>{const name=document.getElementById('studentName').value.trim(); if(!name){alert('Please enter your full name.'); return;} currentQ=0; score=0; shuffle(exOrder); renderQ();};
function renderQ(){const q=EXAM[exOrder[currentQ]]; examReview.innerHTML=''; examRes.textContent=''; examBox.innerHTML=`<div class='card'><h3>Question ${currentQ+1} of ${EXAM.length}</h3><p>${q.q}</p></div>`; q.opts.forEach((op,i)=>{const d=document.createElement('div'); d.className='option'; d.textContent=op; d.onclick=()=>choose(i); examBox.appendChild(d);});}
function choose(i){const q=EXAM[exOrder[currentQ]]; const opts=[...examBox.querySelectorAll('.option')]; opts.forEach(o=>o.onclick=null); const ok=i===q.a; opts[q.a].classList.add('correct'); if(!ok){opts[i].classList.add('wrong'); beep(false);} else {score++; confetti(90); beep(true);} setTimeout(()=>{currentQ++; if(currentQ<EXAM.length) renderQ(); else finishExam();}, 450);}
function finishExam(){examBox.innerHTML=''; const name=document.getElementById('studentName').value.trim(); examRes.innerHTML=`Your score: <b>${score}</b> / ${EXAM.length}`; const review=exOrder.map(idx=>{const q=EXAM[idx]; return `<div><b>Q:</b> ${q.q}<br><span class='muted'>‚úî Correct:</span> ${q.opts[q.a]}</div>`;}).join('<hr>'); examReview.innerHTML = `<h4>Quick Review:</h4>${review}`; show('games');}

/*************** Helpers ***************/
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a;}
const canvas=document.getElementById('confetti'); const ctx=canvas.getContext('2d'); let particles=[]; function resize(){canvas.width=innerWidth; canvas.height=innerHeight;} window.addEventListener('resize',resize); resize(); function confetti(n=80){for(let i=0;i<n;i++) particles.push({x:Math.random()*canvas.width,y:-10,vx:(Math.random()-.5)*3,vy:Math.random()*3+2,c:`hsl(${Math.random()*360},90%,60%)`,s:Math.random()*6+4,a:1});} function tick(){ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p=>{p.x+=p.vx; p.y+=p.vy; p.vy+=0.05; p.a-=0.01;}); particles=particles.filter(p=>p.a>0); particles.forEach(p=>{ctx.globalAlpha=p.a; ctx.fillStyle=p.c; ctx.fillRect(p.x,p.y,p.s,p.s)}); requestAnimationFrame(tick);} requestAnimationFrame(tick);

document.getElementById('testVoice').onclick=()=>speak('This is a British English voice test for Lesson Four.',0.82);
</script>
</body>
</html>
